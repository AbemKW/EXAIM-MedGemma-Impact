# EXAID Evaluation - Variant V3 Configuration
# No TokenGate (Ablation: removes TokenGate, uses fixed chunk intervals)
#
# Paper hook: "V3 triggers BufferAgent at fixed CTU intervals calibrated
# from V0's median flush size, removing adaptive accumulation (Section 4.2)"

variant_id: V3
name: "No TokenGate"
description: "Fixed chunk/time trigger, BufferAgent + Summarizer"

# Trigger policy enum (for ablation suite)
trigger_policy: "no_tokengate"

# Component configuration
components:
  # TokenGate: DISABLED (use fixed intervals instead)
  token_gate:
    enabled: false
  
  # BufferAgent: all checks enabled
  buffer_agent:
    enabled: true
    completeness_check: true
    value_check: true
    novelty_check: true
  
  # Summarizer: generates summaries
  summarizer:
    enabled: true

# Fixed interval trigger (replaces TokenGate)
fixed_trigger:
  enabled: true
  # Chunk size in CTU (Character-normalized Token Units)
  # ceil(len(text) / 4)
  chunk_size_ctu: 125

# V3 Calibration Settings
# Paper hook: "V3 chunk size calibrated using median V0 flush size
# from calibration subset (Section 4.2)"
v3_calibration:
  # Method: median (NOT mean) of V0 flush sizes
  calibration_method: "median"
  # Calibrated chunk size in CTU
  chunk_size_ctu: 125
  # Calibration subset case IDs (placeholder for actual IDs)
  calibration_subset_ids: []
  # Calibration date
  calibration_date: "2025-12-21"
  # Reference: documented in calibration_report.json
  calibration_report: "data/calibration/v3_calibration_report.json"

# Summarizer settings
summarizer:
  # MANDATORY: history_k = 3 for all variants
  history_k: 3

# Metrics role
metrics_role: "ablation_no_tokengate"

# Concept extractor (inherit from extractor.yaml)
concept_extractor:
  inherit_from: "extractor.yaml"
