# EXAIM Evaluation Module - Docker Compose Configuration
# Usage: docker compose -f docker-compose.evals.yml build
#        docker compose -f docker-compose.evals.yml run --rm evals scripts/validate.sh
#
# For trace generation with MAC (requires OpenAI API key):
#   docker compose -f docker-compose.evals.yml run --rm evals scripts/make_traces.sh
#
# Set OPENAI_API_KEY in your environment before running:
#   Windows: $env:OPENAI_API_KEY = "your_key_here"
#   Linux/macOS: export OPENAI_API_KEY="your_key_here"

services:
  evals:
    platform: linux/amd64
    build:
      context: .
      dockerfile: Dockerfile.evals
      platforms:
        - linux/amd64
    volumes:
      - .:/app
    working_dir: /app/evals
    stdin_open: true
    tty: true
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - SCISPACY_LINKER_PATH=/app/scispacy_linkers
